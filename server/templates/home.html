<!DOCTYPE html>
<html lang="en">
<!-- Based off of example: https://raw.githubusercontent.com/23/resumable.js/master/samples/Node.js/public/index.html -->

<head>
    <meta charset="UTF-8">
    <title>DCC Large File Upload</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header><h1>Upload files to the DCC</h1></header>
    <div class="container-fluid">
        <div class="row col-sm-8 col-sm-offset-2 transfer-code">
            <div class="resumable-error">
                Oh no! Your browser isn't supported. Please try a recent version of Chrome or Firefox.
            </div>
            <form class="form-horizontal auth-token-form col-sm-12">
                <div class="form-group">
                    <label for="auth-token" class="control-label">Transfer code</label>
                    <div class="input-group">
                        <input id="auth-token" type="text" name="authToken" class="form-control"
                               placeholder="Please enter your transfer code">
                            <span class="input-group-addon auth-success label-warning">
                                <span class="glyphicon glyphicon-exclamation-sign transfer-symbol"></span>
                            </span>
                    </div>
                </div>
            </form>
        </div>

        <!-- Table showing selected sample files -->
        <div class="row col-sm-8 col-sm-offset-2 sample-table">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-triangle-right pull-left" aria-hidden="true"></span>Select
                    Samples for Upload
                </div>
                <div class="panel-body collapsed">
                    <p>
                        Some instructions on how to select/indicate correct metadata?
                        For example, the same file cannot be included in multiple samples!
                        Indicate that in the event the download is interrupted, the partial
                        file will continue where it was left off.
                    </p>
                    <form class="form-horizontal sample-name-form col-sm-12 col-xs-12">
                        <div class="form-group">
                            <label for="sample-text" class="control-label">Sample name</label>
                            <div class="input-group">
                                <input id="sample-text" type="text" name="sampleName" class="form-control"
                                       placeholder="Please enter a sample name">
                                    <span class="input-group-addon btn btn-success active add-sample-button">
                                        <span class="glyphicon glyphicon-plus" data-toggle="tooltip"
                                              title="Add a new sample"></span>
                                        Add Sample
                                    </span>
                                    <span class="input-group-addon btn btn-danger active cancel-sample-button">
                                        <span class="glyphicon glyphicon-remove" data-toggle="tooltip"
                                              title="Cancel sample creation"></span>
                                        Cancel
                                    </span>
                            </div>
                        </div>
                    </form>
                    <div class="resumable-drop col-sm-12 col-xs-12">
                        <span>Drop files here or</span>
                        <a class="resumable-browse btn btn-default">Browse your computer</a>
                    </div>
                </div>
                <table class="table table-condensed table-data collapsed">
                    <thead>
                    <tr class="active">
                        <th class="edit-disabled"></th>
                        <th class="edit-disabled" colspan="2">Files</th>
                        <th class="edit-disabled">Readset</th>
                        <th class="edit-disabled">Library</th>
                        <th class="edit-disabled">Run Type</th>
                        <th class="edit-disabled">Platform</th>
                        <th class="edit-disabled">Capture Kit</th>
                        <th class="upload-status edit-disabled">Status</th>
                        <th class="options edit-disabled">Options</th>
                    </tr>
                    </thead>
                    <tbody class="sample-template">
                    <tr class="active sample-header-template">
                        <td class="edit-disabled"><span class="sample-collapse glyphicon glyphicon-triangle-bottom"></span></td>
                        <td class="sample-name"></td>
                        <td class="sample-collapse edit-disabled" colspan="6"></td>
                        <td class="sample-option edit-disabled">
                             <span class="option-icon edit-sample-metadata glyphicon glyphicon-list-alt"
                                   data-toggle="modal"
                                   data-target="#sample-modal"
                                   title="Edit metadata for entire sample"></span>
                            <span class="option-icon resumable-add add-files glyphicon glyphicon-plus"
                                  data-toggle="tooltip"
                                  title="Add file(s) to sample"></span>
                            <span class="option-icon remove-sample glyphicon glyphicon-remove" data-toggle="tooltip"
                                  title="Remove sample"></span>
                        </td>
                    </tr>
                    <tr class="sample-file-template">
                        <td class="file-icon edit-disabled"><span class="glyphicon glyphicon-file pull-right"></span></td>
                        <td class="file-name edit-disabled" colspan="2"></td>
                        <td class="readset">* <em>Required</em></td>
                        <td class="library">* <em>Required</em></td>
                        <td class="run-type edit-disabled dropdown">
                            <button id="run-type-menu" class="btn dropdown-toggle" href="" data-toggle="dropdown" role="button"
                               aria-haspopup="true" aria-expanded="true">
                                Select <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="run-type-menu">
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">Paired end</a></li>
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">Single end</a></li>
                                <li role="presentation" class="divider"></li>
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">N/A</a></li>
                            </ul>
                        </td>
                        <td class="platform edit-disabled dropdown">
                            <button id="platform-menu" class="btn dropdown-toggle" href="" data-toggle="dropdown" role="button"
                               aria-haspopup="true" aria-expanded="true">
                                Select <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="platform-menu">
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">Illumina HiSeq</a></li>
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">Illumina X10</a></li>
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">SOLiDv4</a></li>
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">PacBio</a></li>
                                <li role="presentation" class="divider"></li>
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">Other</a></li>
                            </ul>
                        </td>
                        <td class="capture-kit edit-disabled dropdown">
                            <button id="capture-kit-menu" class="btn dropdown-toggle" href="" data-toggle="dropdown" role="button"
                               aria-haspopup="true" aria-expanded="true">
                                Select <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="capture-kit-menu">
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">Agilent SureSelect V3</a></li>
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">Agilent SureSelect V4</a></li>
                                <li role="presentation" class="divider"></li>
                                <li role="presentation"><a class="menu-item" role="menuitem" tabindex="-1">Other (please include BED)</a></li>
                            </ul>
                        </td>
                        <td class="progress edit-disabled">
                            <div class="progress-bar progress-bar-striped active" role="progressbar"></div>
                        </td>
                        <td class="option edit-disabled">
                            <span class="option-icon remove-file glyphicon glyphicon-remove" data-toggle="tooltip"
                                  title="Remove file"></span>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div class="panel-footer collapsed">
                    <button type="button" class="btn btn-info col-xs-2 pull-left upload-sample-button disabled"
                            data-toggle="tooltip" title="Upload all files to the DCC">
                        <span class="glyphicon glyphicon-cloud-upload" aria-hidden="true"></span> Upload All
                    </button>

                </div>
            </div>
        </div>

        <!-- Modal -->
        <div id="sample-modal" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Sample Name</h4>
                    </div>
                    <div class="modal-body">
                        <p>Metadata Options to go here</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Table showing the files currently sitting on the DCC -->
        <div class="row col-sm-8 col-sm-offset-2 dcc-table">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-triangle-right pull-left" aria-hidden="true"></span>DCC
                </div>
                <div class="panel-body collapsed">
                    <p>
                        Instructions on how to request files that are currently sitting on the DCC. Files won't be available
                        for direct download immediately.
                    </p>
                </div>
                <table class="table table-condensed collapsed" id="dcc-table-data">
                    <thead>
                    <tr class="active">
                        <th>Sample Name</th>
                        <th>Files</th>
                        <th>Metadata</th>
                        <th>Status</th>
                        <th>Options</th>
                    </tr>
                    </thead>
                </table>
            </div>
        </div>
        <div class="row col-sm-8 col-sm-offset-2 footer-row">
            <div class="footer">
                If you have any questions or run into issues, please email Orion
                &lt;<a href="mailto:buske@cs.toronto.edu">buske@cs.toronto.edu</a>&gt;
                and/or Dorin
                &lt;<a href="mailto:dorin.manase@sickkids.ca">dorin.manase@sickkids.ca</a>&gt;.
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
            integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
            crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='resumable.js') }}"></script>
    <script src="{{ url_for('static', filename='upload.js') }}"></script>
    <script src="{{ url_for('static', filename='mindmup-editabletable.js') }}"></script>
</body>
</html>